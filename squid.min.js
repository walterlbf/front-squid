document.addEventListener("DOMContentLoaded", function () {
  // Código que será executado quando o navegador carregar

});

async function fetchPhots() {
  const request = await fetch('https://us-central1-squid-apis.cloudfunctions.net/test-front-basic');
  const response = await request.json();
  return response;
};

const newTagPhoto = (_id, link, comentarios, upvotes, height, width, url, username) => {
  console.log(comentarios, upvotes);
  const newTagA = document.createElement('a');
  const newImg = document.createElement('img');
  const newSpan = document.createElement('p')
  const info = document.createTextNode(username);
  newTagA.href = link;
  newImg.src = url;
  newImg.width = width;
  newImg.height = height;
  newImg.className = 'photo ';
  document.getElementById('feed').appendChild(newTagA);
  newTagA.appendChild(newImg);
  newTagA.appendChild(info);

};

const mapPhotos = (getPhotos) => {
  console.log(getPhotos)
  getPhotos.map(({ _id, link, comentarios, upvotes, usuario: { username }, imagens: { thumbnail: { height, width, url } } }) => {
    newTagPhoto(_id, link, comentarios, upvotes, height, width, url, username);
  });

};

window.onload = async function () {
  const getPhotos = await fetchPhots();
  await mapPhotos(getPhotos);
};
