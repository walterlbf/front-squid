document.addEventListener("DOMContentLoaded", function () {
  // Código que será executado quando o navegador carregar

});

async function fetchPhots() {
  const request = await fetch('https://us-central1-squid-apis.cloudfunctions.net/test-front-basic');
  const response = await request.json();
  return response;
};

const newTagPhoto = (_id, link, comentarios, upvotes, height, width, url, username) => {
  const newTagA = document.createElement('a');
  const divPhoto = document.createElement('div');
  const newImg = document.createElement('img');
  const divInfo = document.createElement('div')
  const info = document.createTextNode("@" + username + " " + upvotes + " " + comentarios);
  newTagA.href = link;
  newImg.src = url;
  newImg.width = width;
  newImg.height = height;
  newImg.className = 'object-contain';
  // divPhoto.className = '';
  document.getElementById('feed').appendChild(divPhoto);
  divPhoto.appendChild(newTagA);
  newTagA.appendChild(newImg);
  console.log(info)
  divPhoto.className = "justify-center"
  divInfo.appendChild(info);
  divPhoto.appendChild(divInfo);

};

const mapPhotos = (getPhotos) => {
  console.log(getPhotos)
  getPhotos.map(({ _id, link, comentarios, upvotes, usuario: { username }, imagens: { thumbnail: { height, width, url } } }) => {
    newTagPhoto(_id, link, comentarios, upvotes, height, width, url, username);
  });

};

window.onload = async function () {
  const getPhotos = await fetchPhots();
  await mapPhotos(getPhotos);
};
